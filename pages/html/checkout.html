<div style="text-align:center;font-size:18px;font-weight:bold;">
    CHECKOUT
    <br /><span id="itemsinfo" style="font-size:14px;font-weight: normal;"></span>
</div>
<div id="11" style="display:none;" parts>
    <div class="div-black" id="tours_div" step>1. Select a tour<span onclick="loadedPages.checkout.addTour();" style="position:absolute;right:10px;">Add tour`</span></div>
    <div style="max-width:100%;overflow-x:hidden;">
        <div style="margin:-1px auto;height:55px;background-color: white;position:relative;">
            <span style="font-size:32px;position:absolute;left:10px;">Tours</span>
            <img style="cursor:pointer;position:absolute;top:20px;right:18px;width:20px;" data-toggle="modal" data-target="#filters" src="/images/filtericon.png" />
        </div>
        <div style="max-height:450px;overflow-y:auto;" id="tdiv">
            <table id="tours" class="display nowrap" style="width:95%;max-width:95%;margin-top:-32px;">
                <thead>
                    <tr>
                        <th>Date</th>
                        <th>TourNo</th>
                          <th>Name</th>
                        <th>PAX</th>
                        <th>Tour Operator</th>
                        <th style="display:none;">Tour Operator</th>
                    </tr>
                </thead>
                <tbody>
                </tbody>
            </table>
        </div>
        <div style="padding-left:20px;padding-right:20px;width:100%;position:fixed;bottom: 5px;">
            <button id='confirmTour' onclick="loadedPages.checkout.setCName();" style="margin-top:5px;float:right;" class="btn-green">Confirm & continue</button>
        </div>
    </div>
</div>
<div class="modal" tabindex="-1" role="dialog" id="filters">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title"><strong id="title">Filters</strong></h5>
            </div>
            <div class="modal-body" id="filters_body">

            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-primary" style="margin-top:10px;" data-dismiss="modal">Set</button>
            </div>
        </div>
    </div>
</div>
<div id="filters_temp" style="visibility:hidden;">
    <form>
        <div class="filter-div" style="float:left;">
            <strong>Date</strong>
            <div id="filter_date"></div>
        </div>
        <div class="filter-div" style="float:left;">
            <strong>Nationality</strong>
            <div id="filter_nationality"></div>
        </div>
        <div class="filter-div" style="float:left;">
            <strong>Tour Operator</strong>
            <div id="filter_operator"></div>
        </div>
    </form>
</div>
<div id="1"  parts>
  <div class="div-black" style="margin-top:10px;" id="customer_div" step>1. Customer</div>
  <div style="max-width:100%;overflow-x:hidden;padding:10px;max-height:100%;overflow-y:auto;">
    <form id="customerForm" confirmed="no" style="font-weight:normal;font-size:12px;max-height:calc(100vh - 260px);">
        <input type="hidden" id="customerid" value="-1" />
        <input type="hidden" id="tourNo" name="tourNo" value="1" />
        <input type="hidden" id="cshowroom" value="1" />
        <input type="hidden" id="salesPerson" value="1" />

        <div class="form-group">
            <input placeholder="Name" id="name" type="text" name="name" class="form-control" />
        </div>

        <div class="form-group">
            <input placeholder="Email" id="email" type="text" name="email" class="form-control" />
        </div>
        <div class="form-group">
          <select id="countries" name="countries" class="form-control" style="margin-left:10px;min-width:100%;margin-right:10px;">
            <option></option>
          </select>
            <label id="cstc" style="display:none;"></label>
        </div>
        <div class="form-group">
            <input placeholder="Address line 1" id="address1" type="text" name="address1" class="form-control" />
        </div>
        <div class="form-group">
            <input id="address2" placeholder="Address line 2" type="text" name="address2" class="form-control" />
        </div>
        <div class="form-group">
            <input placeholder="Telephone" id="telephone" type="text" name="telephone" class="form-control" />
        </div>
        <div class="row">
            <div class="col-xs-3 col-lg-3">
                <div class="form-group">
                    <input placeholder="Zip/Post code" id="zip" type="text" name="zip" class="form-control" />
                </div>
            </div>
            <div class="col-xs-6 col-lg-6">
                <div class="form-group">
                    <input placeholder="City" id="city" type="text" name="city" class="form-control" />
                </div>
            </div>
            <div class="col-xs-3 col-lg-3">
                <div class="form-group">
                    <input placeholder="Ring size" id="ringsize" type="text" name="ringsize" class="form-control" />
                </div>
            </div>

        </div>

    </form>
    <div style="padding-left:20px;padding-right:20px;margin-top:5px;">
        <button id='confirmCustomer' onclick="$('#customerForm').submit();" style="width:100%;" class="btn-green">Confirm & continue</button>
    </div>
  </div>
</div>
<div id="3" style="display:none;" parts>
  <div id="error-message"></div>

  <form id="frmStripePayment" action="stripe.php" method="post">
      <div class="field-row">
          <label>Card Holder Name</label> <span id="card-holder-name-info"
              class="info"></span><br> <input type="text" disabled id="name"
              name="name" class="demoInputBox">
      </div>
      <div class="field-row">
          <label>Email</label> <span id="email-info" class="info"></span><br>
          <input type="text" id="email" disabled name="email" class="demoInputBox">
      </div>
      <div class="field-row">
          <label>Card Number</label> <span id="card-number-info"
              class="info"></span><br> <input type="text" id="card-number" value="4242424242424242"
              name="card-number" class="demoInputBox">
      </div>
      <div class="field-row">
          <div class="contact-row column-right">
              <label>Expiry Month / Year</label> <span id="userEmail-info"
                  class="info"></span><br> <select name="month" id="month" value="12"
                  class="demoSelectBox" style="padding:2px;">
                  <option value="01">01</option>
                  <option value="02">02/option>
                  <option value="03">03</option>
                  <option value="04">04</option>
                  <option value="05">05</option>
                  <option value="06">06</option>
                  <option value="07">07</option>
                  <option value="08">08</option>
                  <option value="03">09</option>
                  <option value="10">10</option>
                  <option value="11">11</option>
                  <option value="12">12</option>
              </select> <select style="padding:2px;" name="year" id="year"
                  class="demoSelectBox">
                  <option value="20">2020</option>
                  <option value="21">2021</option>
                  <option value="22">2022</option>
                  <option value="23">2023</option>
                  <option value="24">2024</option>
                  <option value="25">2025</option>
                  <option value="26">2026</option>
                  <option value="27">2027</option>
                  <option value="28">2028</option>
                  <option value="29">2029</option>
                  <option value="30">2030</option>
              </select>
          </div>
          <div class="contact-row cvv-box">
              <label>CVC</label> <span id="cvv-info" class="info"></span><br>
              <input type="text" name="cvc" id="cvc"
                  class="demoInputBox cvv-input">
          </div>
      </div>
      <div>
          <input type="submit" name="pay_now" value="Submit"
              id="submit-btn" class="btnAction"
              onClick="stripePay(event);">

          <div id="loader">
              <img alt="loader" src="LoaderIcon.gif">
          </div>
      </div>
      <input type='hidden' name='amount' id="amount" value='0.5'>
      <input type='hidden'  name='currency_code' value='EUR'>
       <input type='hidden'  name='item_name' value='Web order'>
       <input type='hidden'  name='item_number' value='Items from web shop'>
  </form>
</div>

<div id="2" style="display:none;" parts>
  <div class="div-black" style="margin-top:10px;padding-left:10px;" id="overview_div" step>
    Overview<span onclick="$('#3').hide();$('#2').show();" style="position:absolute;right:10px;">Back to overview</span></div>
  <!--  <div style="padding:5px;width:100%;text-align:center;">
      <img onclick="loadedPages.checkout.shareOverview();" class='share' onclick="shareItem(this);" style='width:30px;margin-left:3px;margin-top:-3px;' src='http://85.214.165.56:81/coster/www/images/share.png' />
    </div>-->
<div id="share" style="max-width:100%;background:white;overflow-x:hidden;padding:10px;">
  <div id="served" style="text-align:center;"></div>
  <div id="tour" style="text-align:center;"></div>
  <div id="customerInfo">
    <div class="row">
      <div class="col-xs-12 col-lg-6" firstName></div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-lg-6" address1></div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-lg-12" address2></div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-lg-12" city></div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-lg-12" country></div>
    </div>
    <br />
    <div class="row">
      <div class="col-xs-12 col-lg-12" email></div>
    </div>


    <div class="row">
      <div class="col-xs-6 col-lg-6" ringsize></div>
    </div>
    <div class="row">
      <div class="col-xs-12 col-lg-12" telephone></div>
    </div>
    <div class="row">
        <div class="col-xs-6 col-lg-6" hotel></div>
    </div>

  </div>
  <div id="items"></div>
  <div id="total_div" style="border-bottom:1px solid #e2e2e2;width:100px;min-width:100%;float:right;text-align:right;background:white;padding:10px;font-size:15px;"></div>
  <div id="payments_div" style="display:none !important;;width:100px;min-width:100%;float:right;text-align:right;background:white;padding:10px;font-size:15px;">
    <table id="pt" style="table-layout:auto;width:200px;float:right;"></table>
  </div>
  <div style="text-align:center;display:none;" id="notice"></div>
  <div id="cache" style="text-align:center;font-weight:bold;display:none;" id="notice"></div>
</div>


    <div style="padding-left:20px;padding-right:20px;">
        <button style="margin-top:20px;float:right;" onclick="$('#frmStripePayment').find('#email').val($('#customerForm').find('#email').val());$('#frmStripePayment').find('#name').val($('#customerForm').find('#name').val());$('#2').hide();$('#3').show();" class="btn-black">PAYMENT</button>

    </div>
  </div>

  <table style="display:none;">
      <tr id="master" style="min-width:100px;">
          <td style="text-align: right;min-width:140px;">
              <select class="form-control" onchange="loadedPages.checkout.paymentMethodChanged(this);" id="paymentMethods" currency>
              </select>
          </td>
          <td style="text-align: right;min-width:80px;">
            <select class="form-control"  onchange="loadedPages.checkout.changeCurrency(this);" id="pay_currency" class="pay_currency" style="width:100%;">
                <option value="EUR" rate="1">EUR</option>
            </select>
          </td>
          <td style="text-align: right;width:100%;">
              <input type="text" class="form-control" />
          </td>
          <td onclick='loadedPages.checkout.deletePayment(this);'><i class='fa fa-trash fa-2x m-r-5'></i></td>
          <tr>
  </table>
<div id="4" style="display:none;" parts>
  <div id="thanks" style="width:100%;text-align:center;"></div>
  <form id="shippingForm" confirmed="no" style="font-weight:normal;font-size:12px;max-height:calc(100vh - 260px);">

      <div class="form-group">
          <input placeholder="Name" id="sname" type="text" name="sname" class="form-control" />
      </div>
        <div class="form-group">
          <input placeholder="Address line 1" id="saddress1" type="text" name="saddress1" class="form-control" />
      </div>
      <div class="form-group">
          <input id="saddress2" placeholder="Address line 2" type="text" name="saddress2" class="form-control" />
      </div>
      <div class="form-group">
          <input placeholder="Telephone" id="stelephone" type="text" name="stelephone" class="form-control" />
      </div>
      <div class="row">
          <div class="col-xs-3 col-lg-3">
              <div class="form-group">
                  <input placeholder="Zip/Post code" id="szip" type="text" name="szip" class="form-control" />
              </div>
          </div>
          <div class="col-xs-6 col-lg-6">
              <div class="form-group">
                  <input placeholder="City" id="scity" type="text" name="scity" class="form-control" />
              </div>
          </div>


      </div>

  </form>
  <button class="btn-black" onclick="$('body').LoadingOverlay('show', optionsLoader);$('#toggleShoppigCart').addClass('empty');shoppingCartContent=[];$('#4').hide();loadedPages.checkout.generateInvoice();">CONFIRM</button>
</div>
<div id="invoice" style="font-family:'Calibri Light';background-color: white;border:none;height:561px;width:400px;padding-bottom:20px;">
  <style>
  #footerdata td {
    vertical-align: bottom;
      white-space:nowrap;
      font-size:6pt;
  }
  #master td select {

    font-size: 10px;
  }
  #master td input {
    font-size: 10px;
  }
  #iit td {
    vertical-align:bottom;
    border:none;
  }
  #pTable td, #summary td {
    font-size: 5pt;
      white-space:nowrap;
    padding: 0px;
  }
    #mTable td {
      white-space:nowrap;
      min-height:30px;
      background: transparent;
    }
    #mTable th {
      background-color: #e5e5e5;
    }
    #invoice {
      padding:5px;
      font-size: 5pt;
      min-width:400px;
      max-width:400px;
      height:553px;
      max-height:553px;
      min-height:553px;
      min-width:400px;
      display:none;
    }

    #invoice_header {
      height: 50px;
      min-height: 50px;
      width: 400px;
      max-width: 400px;
      background: url(http://85.214.165.56:81/coster/www/images/logo.png);
      background-repeat: no-repeat;
      background-size: contain;
      background-position: top center;
    }
    </style>
  <div id="invoice_header">
    <img id="bar_image" style="height:40px;float:right;" src="" style="height: 10px;max-height:10px;width:auto;" />
  </div>
  <div>
      <div style="width:50%;float:left;text-align:left;">
          <span style="font-size: 20px;color:#8E8952;font-weight:bold;">INVOICE</span><br />
        <div style="margin-top: 0px;">
          <strong style="margin-top:5px;font-size:7pt;font-weight:bold;">CUSTOMER INFORMATION</strong>
          <div id="cinf" style="font-size:5pt;color:color:#323232;line-height:5.5pt;"></div>
        </div>
      </div>
      <div id="info" style="width:50%;float:right;margin-top:40px;text-align:right;"">

          <span>Invoice Number: <span id="inm"></span></span>
          <br /><span>Tour number: <span><span id="tnmbr"></span>
          <br />
          <br />
          Questions? Email your <br />
          diamond consultant<br />
          <span id="consultant"></span>
      </div>
      <div>
    <div style="margin-top:20px;width:400px;float:left;border-bottom: 1px solid #F2F2F2;">
      <span style="color:grey;" id="invoiceDate"></span><span style="float:right" id="servedby"></span>
    </div>

  <table id="mTable" style="border-collapse: collapse;font-size:6pt;display: table;position: releative;bottom: 0px;width:400px;max-width:400px;">

    <tbody id="mTableBody">
    </tbody>
  </table>
  <table id="pTable"  tableborder="0" style="width:50%;float:right;margin-right:6px;margin-top:20px;border-collapse:collapse;display: table;font-size:5pt;background-color:transparent;">
  </table>
  <table id="iit" tableborder="0" style="width:400px;min-width:400px;font-size:6pt;position:absolute;bottom:110px;">
    <tr>
      <td style="width: 45%;min-width:45%;text-align:left;vertical-align:bottom;">
        <img src="" id="customerSignature" style="margin-left:44px;width:100px;" /><br />
        <img src="http://85.214.165.56:81/costerdemo/coster/www/images/signature.png" style="margin-top:-12px;width:150px;float:left" /><br />
        <p refund style="display:none;font-size: 5pt;color:#323232;text-align:left;line-height:5.5pt;width:150px;">
          Important to non-EU visitors: If you do not comply with EU regulations concerning VAT refunds,
           we have the right to charge you within 3 months: <span id="dfamount"></span>.
        </p>
        <p norefund style="display:none;font-size: 5pt;color:#323232;text-align:left;line-height:5.5pt;width:150px;">
          We provided you with a VAT refund <br />cheque for VAT refund purposes.
        </p>
      </td>
      <td style="width: 10%;min-width:10%;"></td>
      <td style="vertical-align:top;width: 45%;min-width:45%;text-align:right;vertical-align:bottom;">
        <table id="summary" style="display: table;font-size:5pt;background-color:#e2e2e2;">
        </table>
      </td>
      </tr></table>

      <table  tableborder="0"  border="0" style="width:100%;min-width:100%;margin-top:10px;font-size:6pt;">
        <tr>
          <td style="width: 45%;min-width:45%;">
            <table id="pTable" style="display: table;font-size:5pt;background-color:#e2e2e2;">
            </table>
          </td>
          <td style="width: 10%;min-width:10%;"></td>
          <td style="vertical-align:top;width: 45%;min-width:45%;text-align:right;">
            <table id="summary" style="display: table;font-size:6pt;background-color:#e2e2e2;">
            </table>
          </td>
      </tr></table>
    <!--  <div style="font-size:8px;width:400px;position:absolute;bottom:150px;display:none;" id="dfund">
          <img src="http://85.214.165.56:81/costerdemo/coster/www/images/signature.png" style="width:150px;float:left" /><br />
          <p style="font-size: 5pt;color:#323232;text-align:left;line-height:5.5pt;width:150px;">
            Important to non-EU visitors: If you do not comply with EU regulations concerning VAT refunds,
             we have the right to charge you within 3 months: <span id="dfamount"></span>.
          </p>
      </div> -->
<div style="font-size:8px;width:400px;position:absolute;bottom:20px;">

    <table tableborder="0" id="footerdata" style="font-size:8px;table-layout:fixed;width:400px;">
    <!--  <tr>
         <td style="width:100%;vertical-align:top;">
              <img src="http://85.214.165.56:81/costerdemo/coster/www/images/separatr.jpeg" style="width:100%;"/>
            </td>
        </tr>

        <tr>
          <td  style="vertical-align:top;text-align:center;white-space: normal;max-width:100%;font-size: 5pt;">

                <img src="http://85.214.165.56:81/costerdemo/coster/www/images/greendiamond.jpeg" style= "margin-top:-6px;width:125px;float:left;" />
                 <p style="padding-right:20px;font-size: 5pt;top: 5pt;position:absolute;left:149px;color:#323232;text-align:left;line-height:5.5pt;">At Royal Coster Diamonds we realize we have a responsibility to the planet and believe in giving back to the planet. We therefore commited ourselves to donating 1% of our turnover of our Green collection to the Green Diamond Initiative. (GDI)
                <br /><span style="position:relative;top:10px;"><i>Read more about the initiative at www.greendiamondinitiative.org</i></span> </p>

          </td>

        </tr>
        <tr>
          <td>
              <img src="http://85.214.165.56:81/costerdemo/coster/www/images/separatr.jpeg" style="width:100%;"/>
          </td>
        </tr>
        </table> -->
        <table style="table-layout:fixed;width:400px;">
        <tr>
          <td style="width:33%;min-width:33%;max-width:33%;padding-top:10px;vertical-align:top;text-align:left;font-size:5pt;color:#323232;">
            Royal Coster Diamonds B.V.<br />
            Paulus Potterstraat 2 | 1071 CZ Amsterdam<br />
            The Netherlands | T +31 (0) 305 55 55<br />
            service@costerdiamonds.com
          </td>
          <td style="width:33%;min-width:33%;max-width:33%;padding-top:10px;vertical-align:top;text-align:left;font-size:5pt;color:#323232;">
            Bank: ABN AMRO Amsterdam<br />
            Account no: 243 5008 66 | BIC: ABNANL2A<br />
            IBAN: NL30 ABNA 0243 5008 66<br />
            VAT: NL008640294B01 | CoC: 33180723<br />
          </td>
          <td style="width:33%;min-width:33%;max-width:33%;padding-top:10px;vertical-align:top;text-align:left;font-size:5pt;color:#323232;">
              <span id="cacheover" style="display:none;">Due to company policy we require a valid<br />
              ID for sales of € 10.000  or more.</span>
              <br />Goods remain seller's property until<br />legally valid payment has been received in full.
          </td>
      </tr>
      <tr>
        <td colspan="3" style="font-size:4.5pt;text-align:center;">
          For Terms & Conditions visit costerdiamonds.com/terms
        </td>
      </tr>
    </table>
  </div>

<style>
 html {
   background-color: white;
 }

    .yadcf-filter-wrapper {
        width: 100%;
    }

    .yadcf-filter-reset-button {
        display: none !important;
    }

    .filter-div {
        width: 100%;
        padding-top: 10px;
        padding-bottom: 10px;
        border-bottom: 1px solid black;
    }

    .select2-selection.select2-selection--multiple {
        max-width: 50% !important;
    }

    #tours_filter {
        display: none;
    }

    #tours_wrapper {
        margin-top: 30px;
    }

    #tours td:nth-of-type(6) {
        display: none !important;
    }

    #tours td:nth-of-type(4) {
        max-width: 100% !important;
        width: 100% !important;
        word-wrap: break-word;
        word-break: break-word;
        white-space: normal;
    }

    #tours td,
    #tours th {
        font-size: 14px;
    }
    .typeahead.dropdown-menu {
      position: relative !important;
      top: 5px !important;
    }
    #mTableBody tr {

    }
    #mTableBody tr td {
      font-size:5pt !important;
      vertical-align: bottom !important;
      background-color: transparent;
    }
    #mTableBody tr > td:last-of-type {
     padding-right: 5px;
    }
    #mTableBody tr.even {
      background-color: #F2F2F2;
    }

</style>
<script>
function cardValidation () {
    var valid = true;
    var name = $('#name').val();
    var email = $('#email').val();
    var cardNumber = $('#card-number').val();
    var month = $('#month').val();
    var year = $('#year').val();
    var cvc = $('#cvc').val();

    $("#error-message").html("").hide();

    if (name.trim() == "") {
        valid = false;
    }
    if (email.trim() == "") {
    	   valid = false;
    }
    if (cardNumber.trim() == "") {
    	   valid = false;
    }

    if (month.trim() == "") {
    	    valid = false;
    }
    if (year.trim() == "") {
        valid = false;
    }
    if (cvc.trim() == "") {
        valid = false;
    }

    if(valid == false) {
      showModal({
        type: "error",
        confirmButtonText: "CONTINUE",
        showCancelButton: false,
        title: "All fields required"
      })
    }

    return valid;
}
//set your publishable key
Stripe.setPublishableKey("pk_test_B7LzF5ZOBMVVM9YuTw5AIqcQ");

//callback to handle the response from stripe
function stripeResponseHandler(status, response) {
  $("#loader").hide();
    if (response.error) {
        //enable the submit button
        showModal({
          type: "error",
          showCancelButton: false,
          confirmButtonText: "CONTINUE",
          title: response.error.message
        })
        $("#submit-btn").show();
        $( "#loader" ).css("display", "none");
        //display the errors on the form

    } else {
        //get token id
        var token = response['id'];
        //insert the token into the form
        $("#frmStripePayment").append("<input type='hidden' name='token' value='" + token + "' />");
        //submit form to the server
          $("#submit-btn").show();
        loadedPages.checkout.doStripe();
    }
}
function stripePay(e) {
    e.preventDefault();
    var valid = cardValidation();

    if(valid == true) {
        $("#submit-btn").hide();
        $( "#loader" ).css("display", "inline-block");
        Stripe.createToken({
            number: $('#card-number').val(),
            cvc: $('#cvc').val(),
            exp_month: $('#month').val(),
            exp_year: $('#year').val()
        }, stripeResponseHandler);

        //submit from callback
        return false;
    }
}
</script>
<style>

  #error-message {
      margin: 0px 0px 10px 0px;
      padding: 5px 25px;
      border-radius: 4px;
      line-height: 25px;
      font-size: 0.9em;
      color: #ca3e3e;
      border: #ca3e3e 1px solid;
      display: none;
      width: 300px;
  }

  #success-message {
      margin: 0px 0px 10px 0px;
      padding: 5px 25px;
      border-radius: 4px;
      line-height: 25px;
      font-size: 0.9em;
      color: #3da55d;
      border: #43b567 1px solid;
      width: 300px;
  }

  .display-none {
      display:none;
  }

  #response-container {
      padding: 40px 20px;
      width: 270px;
      text-align:center;
  }


  .ack-message {
      font-size: 1.5em;
      margin-bottom: 20px;
  }

  #response-container.success {
      border-top: #b0dad3 2px solid;
      background: #e9fdfa;
  }

  #response-container.error {
      border-top: #c3b4b4 2px solid;
      background: #f5e3e3;
  }

  .img-response {
      margin-bottom: 30px;
  }

  #loader {
      display: none;
  }

  #loader img {
      width: 45px;
      vertical-align: middle;
  }
</style>
